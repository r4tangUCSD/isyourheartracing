<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is Your Heart Racing?</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Project Intro -->
    <section id="intro-section" class="active">
    <div class="heartbeat-container">
        <svg id="heartbeat-svg" width="80%" height="100" viewBox="0 0 1000 100" preserveAspectRatio="xMinYMid meet">
            <path id="heartbeat-path" d="M0,50 L0,50" stroke="#4CAF50" stroke-width="3" fill="none" />
        </svg>
    </div>
    
    <!-- Group Credits -->
    <div id="group-credits" class="group-credits">
        <h3>Created by the_data_viz_biz_whiz: Ivan, Vivian, Ryan, Karina</h3>
    </div>
    
    <!-- Icon -->
    <div id="team-icon" class="team-icon">
        <img src="images/heart_isolated.png" alt="Team Icon">
    </div>
    
    <div id="intro-text" class="intro-text">
        <h1>Is Your Heart Racing?</h1>
        <p>During emergency surgery, your body experiences intense stress and rapid changes <br>— often without you ever realizing it.<br>But what really happens to your heart as you go under the knife?</p>
    </div>
    </section>

    <!-- Case Intro -->
    <section id="intro-second" class="hidden">
        <div class="intro-text">
            <h2>Every surgery tells a story through the heart.</h2>
            <p>Let's look at one together!</p>
            <button id="start-button" class="action-button">Start</button>
        </div>
    </section>

    <!-- Scrolly-telling -->
    <section id="story-section" class="hidden">
        <div class="scrolly-container">
            <!-- body -->
            <div id="silhouette" class="silhouette" style="background-image: url('images/body_isolated.png');"></div>
            
            <!-- heart rate -->
            <div class="bpm-container">
                <div id="bpm-box" class="bpm-box">
                    <span class="bpm-label"></span>
                    <div id="heart-rate" class="bpm">--</div>
                </div>
                <div id="stage-time" class="time" style="margin-top: 20px;">Time: -- minutes</div>
            </div>
            
            <!-- description  -->
            <div id="stage-info">
                <div id="stage-name" class="stage-name">Is Your Heart Racing?</div>
                <div id="stage-description" class="description">Scroll down to start!</div>
            </div>
        </div>
        <script type="module" src="story.js"></script>
    </section>

    <!-- Bubble Section (Hidden Initially) -->
    <section id="bubble-section" style="display: none;">
        <div class="end-button-container">
            <button id="done-button" class="action-button">I'm all done!</button>
        </div>
        <h1>Explore on your own</h1>
        <h4>There are hundreds of surgeries, all unique.</h4>
        <div class="container">
            <div class="visualization" id="visualization">
                <div class="loading">Loading visualization data...</div>
            </div>
            <div class="chart-container">
                <div id="chart">
                    <div class="no-data">Select a patient to view heart rate data</div>
                </div>
                <div id="surgery-description"></div>
            </div>
        </div>
        <div id="case-tooltip"></div>
        <div id="tooltip" class="tooltip"></div>
    </section>

    <!-- Graph Section (Hidden Initially) -->
    <section id="graph-section" style="display: none;">
        <div id="back-bubble"></div>
        <div id="everything-else">
            <div id="stats">
                <div class="left-side">
                    <h3>Average Heart Rate Within the Last Minute</h3>
                    <div id="average">
                        <text id="unit">HR</text>
                        <text id="unit">bpm</text>
                        <div id="value"></div>
                    </div>
                    <div id="information">
                        <div id="title"></div>
                        <div id="details"></div>
                        <div id="surgery-info"></div>
                    </div>
                </div>
                <div id="animation">
                    <h3>Heart Rate Over the Course of the Surgery</h3>
                    <div id="graph"></div>
                    <label id="label">
                        <div id="tracker">
                            <div id="percent"></div>
                            <div id="time-label"><time id="selected-time"></time></div>
                        </div>
                        <input type="range" id="slider" min="0" max="100" value="0" step="0.01">
                    </label>
                    <div class="legend">
                        <text id="legend-title">Legend:</text>
                        <div id="categories">
                            <div id="low">Low</div>
                            <div id="resting">Resting</div>
                            <div id="moderate">Moderate</div>
                            <div id="high">High</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Final Section -->
    <section id="final-section" class="hidden">
        <div class="intro-text">
            <h1>So...is your heart racing?</h1>
            <p>The answer actually seems like no. Despite these being emergency cases, varying types of surgeries don’t actually change much from their mean heart rates.</p>
            <p>But you might be thinking: well, Patient 32's heart rate went all the way up to 160! However, a lot of cases follow a similar pattern. Patients spike at critical levels, but are efficiently managed by hospital staff and brought to normal down rather quickly.</p>
            <p>Understanding these patterns can offer insights into patient risk factors and recovery expectations. Essentially, we can more informed decisions by understanding how specific surgeries might impact the body and heart!</p>
        </div>
    </section>

    <script type="module" src="intro.js"></script>
    <script type="module" src="bubbles_viz.js"></script>
</body>
</html>